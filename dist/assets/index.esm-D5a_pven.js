import{a as e,c as t,d as n,f as r,g as i,h as a,i as o,l as s,m as c,n as l,o as u,p as d,r as ee,s as f,t as p,u as m}from"./index-CmA_jHyz.js";var h=`@firebase/installations`,g=`0.6.18`,te=1e4,_=`w:${g}`,v=`FIS_v2`,ne=`https://firebaseinstallations.googleapis.com/v1`,re=3600*1e3,y=new t(`installations`,`Installations`,{"missing-app-config-values":`Missing App configuration value: "{$valueName}"`,"not-registered":`Firebase Installation is not registered.`,"installation-not-found":`Firebase Installation not found.`,"request-failed":`{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"`,"app-offline":`Could not process request. Application offline.`,"delete-pending-registration":`Can't delete installation while there is a pending registration request.`});function b(e){return e instanceof s&&e.code.includes(`request-failed`)}function x({projectId:e}){return`${ne}/projects/${e}/installations`}function ie(e){return{token:e.token,requestStatus:2,expiresIn:ce(e.expiresIn),creationTime:Date.now()}}async function ae(e,t){let n=(await t.json()).error;return y.create(`request-failed`,{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function oe({apiKey:e}){return new Headers({"Content-Type":`application/json`,Accept:`application/json`,"x-goog-api-key":e})}function se(e,{refreshToken:t}){let n=oe(e);return n.append(`Authorization`,le(t)),n}async function S(e){let t=await e();return t.status>=500&&t.status<600?e():t}function ce(e){return Number(e.replace(`s`,`000`))}function le(e){return`${v} ${e}`}async function ue({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let r=x(e),i=oe(e),a=t.getImmediate({optional:!0});if(a){let e=await a.getHeartbeatsHeader();e&&i.append(`x-firebase-client`,e)}let o={fid:n,authVersion:v,appId:e.appId,sdkVersion:_},s={method:`POST`,headers:i,body:JSON.stringify(o)},c=await S(()=>fetch(r,s));if(c.ok){let e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:ie(e.authToken)}}else throw await ae(`Create Installation`,c)}function C(e){return new Promise(t=>{setTimeout(t,e)})}function de(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,`-`).replace(/\//g,`_`)}var fe=/^[cdef][\w-]{21}$/,w=``;function pe(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let t=me(e);return fe.test(t)?t:w}catch{return w}}function me(e){return de(e).substr(0,22)}function T(e){return`${e.appName}!${e.appId}`}var E=new Map;function D(e,t){let n=T(e);O(n,t),he(n,t)}function O(e,t){let n=E.get(e);if(n)for(let e of n)e(t)}function he(e,t){let n=ge();n&&n.postMessage({key:e,fid:t}),_e()}var k=null;function ge(){return!k&&`BroadcastChannel`in self&&(k=new BroadcastChannel(`[Firebase] FID Change`),k.onmessage=e=>{O(e.data.key,e.data.fid)}),k}function _e(){E.size===0&&k&&(k.close(),k=null)}var ve=`firebase-installations-database`,ye=1,A=`firebase-installations-store`,be=null;function j(){return be||=e(ve,ye,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(A)}}}),be}async function M(e,t){let n=T(e),r=(await j()).transaction(A,`readwrite`),i=r.objectStore(A),a=await i.get(n);return await i.put(t,n),await r.done,(!a||a.fid!==t.fid)&&D(e,t.fid),t}async function N(e){let t=T(e),n=(await j()).transaction(A,`readwrite`);await n.objectStore(A).delete(t),await n.done}async function P(e,t){let n=T(e),r=(await j()).transaction(A,`readwrite`),i=r.objectStore(A),a=await i.get(n),o=t(a);return o===void 0?await i.delete(n):await i.put(o,n),await r.done,o&&(!a||a.fid!==o.fid)&&D(e,o.fid),o}async function F(e){let t,n=await P(e.appConfig,n=>{let r=Se(e,xe(n));return t=r.registrationPromise,r.installationEntry});return n.fid===w?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function xe(e){return L(e||{fid:pe(),registrationStatus:0})}function Se(e,t){if(t.registrationStatus===0){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(y.create(`app-offline`))};let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:Ce(e,n)}}else if(t.registrationStatus===1)return{installationEntry:t,registrationPromise:we(e)};else return{installationEntry:t}}async function Ce(e,t){try{let n=await ue(e,t);return M(e.appConfig,n)}catch(n){throw b(n)&&n.customData.serverCode===409?await N(e.appConfig):await M(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function we(e){let t=await I(e.appConfig);for(;t.registrationStatus===1;)await C(100),t=await I(e.appConfig);if(t.registrationStatus===0){let{installationEntry:t,registrationPromise:n}=await F(e);return n||t}return t}function I(e){return P(e,e=>{if(!e)throw y.create(`installation-not-found`);return L(e)})}function L(e){return Te(e)?{fid:e.fid,registrationStatus:0}:e}function Te(e){return e.registrationStatus===1&&e.registrationTime+te<Date.now()}async function Ee({appConfig:e,heartbeatServiceProvider:t},n){let r=De(e,n),i=se(e,n),a=t.getImmediate({optional:!0});if(a){let e=await a.getHeartbeatsHeader();e&&i.append(`x-firebase-client`,e)}let o={installation:{sdkVersion:_,appId:e.appId}},s={method:`POST`,headers:i,body:JSON.stringify(o)},c=await S(()=>fetch(r,s));if(c.ok)return ie(await c.json());throw await ae(`Generate Auth Token`,c)}function De(e,{fid:t}){return`${x(e)}/${t}/authTokens:generate`}async function R(e,t=!1){let n,r=await P(e.appConfig,r=>{if(!B(r))throw y.create(`not-registered`);let i=r.authToken;if(!t&&Ae(i))return r;if(i.requestStatus===1)return n=Oe(e,t),r;{if(!navigator.onLine)throw y.create(`app-offline`);let t=Me(r);return n=ke(e,t),t}});return n?await n:r.authToken}async function Oe(e,t){let n=await z(e.appConfig);for(;n.authToken.requestStatus===1;)await C(100),n=await z(e.appConfig);let r=n.authToken;return r.requestStatus===0?R(e,t):r}function z(e){return P(e,e=>{if(!B(e))throw y.create(`not-registered`);let t=e.authToken;return Ne(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ke(e,t){try{let n=await Ee(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await M(e.appConfig,r),n}catch(n){if(b(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await N(e.appConfig);else{let n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await M(e.appConfig,n)}throw n}}function B(e){return e!==void 0&&e.registrationStatus===2}function Ae(e){return e.requestStatus===2&&!je(e)}function je(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+re}function Me(e){let t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Ne(e){return e.requestStatus===1&&e.requestTime+te<Date.now()}async function Pe(e){let t=e,{installationEntry:n,registrationPromise:r}=await F(t);return r?r.catch(console.error):R(t).catch(console.error),n.fid}async function Fe(e,t=!1){let n=e;return await Ie(n),(await R(n,t)).token}async function Ie(e){let{registrationPromise:t}=await F(e);t&&await t}function Le(e){if(!e||!e.options)throw V(`App Configuration`);if(!e.name)throw V(`App Name`);for(let t of[`projectId`,`apiKey`,`appId`])if(!e.options[t])throw V(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function V(e){return y.create(`missing-app-config-values`,{valueName:e})}var H=`installations`,Re=`installations-internal`,ze=e=>{let t=e.getProvider(`app`).getImmediate();return{app:t,appConfig:Le(t),heartbeatServiceProvider:p(t,`heartbeat`),_delete:()=>Promise.resolve()}},Be=e=>{let t=p(e.getProvider(`app`).getImmediate(),H).getImmediate();return{getId:()=>Pe(t),getToken:e=>Fe(t,e)}};function Ve(){l(new f(H,ze,`PUBLIC`)),l(new f(Re,Be,`PRIVATE`))}Ve(),o(h,g),o(h,g,`esm2017`);var U=`analytics`,He=`firebase_id`,Ue=`origin`,We=60*1e3,Ge=`https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig`,W=`https://www.googletagmanager.com/gtag/js`,G=new u(`@firebase/analytics`),K=new t(`analytics`,`Analytics`,{"already-exists":`A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.`,"already-initialized":`initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.`,"already-initialized-settings":`Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.`,"interop-component-reg-failed":`Firebase Analytics Interop Component failed to instantiate: {$reason}`,"invalid-analytics-context":`Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}`,"indexeddb-unavailable":`IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}`,"fetch-throttle":`The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.`,"config-fetch-failed":`Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}`,"no-api-key":`The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.`,"no-app-id":`The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.`,"no-client-id":`The "client_id" field is empty.`,"invalid-gtag-resource":`Trusted Types detected an invalid gtag resource: {$gtagURL}.`});function Ke(e){if(!e.startsWith(W)){let t=K.create(`invalid-gtag-resource`,{gtagURL:e});return G.warn(t.message),``}return e}function q(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function qe(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function Je(e,t){let n=qe(`firebase-js-sdk-policy`,{createScriptURL:Ke}),r=document.createElement(`script`),i=`${W}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Ye(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Xe(e,t,n,r,i,a){let o=r[i];try{if(o)await t[o];else{let e=(await q(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(e){G.error(e)}e(`config`,i,a)}async function Ze(e,t,n,r,i){try{let a=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);let r=await q(n);for(let n of e){let e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(i)a.push(i);else{a=[];break}}}a.length===0&&(a=Object.values(t)),await Promise.all(a),e(`event`,r,i||{})}catch(e){G.error(e)}}function Qe(e,t,n,r){async function i(i,...a){try{if(i===`event`){let[r,i]=a;await Ze(e,t,n,r,i)}else if(i===`config`){let[i,o]=a;await Xe(e,t,n,r,i,o)}else if(i===`consent`){let[t,n]=a;e(`consent`,t,n)}else if(i===`get`){let[t,n,r]=a;e(`get`,t,n,r)}else if(i===`set`){let[t]=a;e(`set`,t)}else e(i,...a)}catch(e){G.error(e)}}return i}function $e(e,t,n,r,i){let a=function(...e){window[r].push(arguments)};return window[i]&&typeof window[i]==`function`&&(a=window[i]),window[i]=Qe(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function et(e){let t=window.document.getElementsByTagName(`script`);for(let n of Object.values(t))if(n.src&&n.src.includes(W)&&n.src.includes(e))return n;return null}var tt=30,nt=1e3,J=new class{constructor(e={},t=nt){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function rt(e){return new Headers({Accept:`application/json`,"x-goog-api-key":e})}async function it(e){let{appId:t,apiKey:n}=e,r={method:`GET`,headers:rt(n)},i=Ge.replace(`{app-id}`,t),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let e=``;try{let t=await a.json();t.error?.message&&(e=t.error.message)}catch{}throw K.create(`config-fetch-failed`,{httpStatus:a.status,responseMessage:e})}return a.json()}async function at(e,t=J,n){let{appId:r,apiKey:i,measurementId:a}=e.options;if(!r)throw K.create(`no-app-id`);if(!i){if(a)return{measurementId:a,appId:r};throw K.create(`no-api-key`)}let o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new ct;return setTimeout(async()=>{s.abort()},n===void 0?We:n),Y({appId:r,apiKey:i,measurementId:a},o,s,t)}async function Y(e,{throttleEndTimeMillis:t,backoffCount:r},i,a=J){let{appId:o,measurementId:s}=e;try{await ot(i,t)}catch(e){if(s)return G.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${e?.message}]`),{appId:o,measurementId:s};throw e}try{let t=await it(e);return a.deleteThrottleMetadata(o),t}catch(t){let c=t;if(!st(c)){if(a.deleteThrottleMetadata(o),s)return G.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:s};throw t}let l=Number(c?.customData?.httpStatus)===503?n(r,a.intervalMillis,tt):n(r,a.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:r+1};return a.setThrottleMetadata(o,u),G.debug(`Calling attemptFetch again in ${l} millis`),Y(e,u,i,a)}}function ot(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(a),r(K.create(`fetch-throttle`,{throttleEndTimeMillis:t}))})})}function st(e){if(!(e instanceof s)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var ct=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}},X;async function lt(e,t,n,r,i){if(i&&i.global){e(`event`,n,r);return}else{let i=await t;e(`event`,n,Object.assign(Object.assign({},r),{send_to:i}))}}var Z;function ut(e){Z=e}function dt(e){X=e}async function ft(){if(a())try{await i()}catch(e){return G.warn(K.create(`indexeddb-unavailable`,{errorInfo:e?.toString()}).message),!1}else return G.warn(K.create(`indexeddb-unavailable`,{errorInfo:`IndexedDB is not available in this environment.`}).message),!1;return!0}async function pt(e,t,n,r,i,a,o){let s=at(e);s.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&G.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>G.error(e)),t.push(s);let c=ft().then(e=>{if(e)return r.getId()}),[l,u]=await Promise.all([s,c]);et(a)||Je(a,l.measurementId),Z&&(i(`consent`,`default`,Z),ut(void 0)),i(`js`,new Date);let d=o?.config??{};return d[Ue]=`firebase`,d.update=!0,u!=null&&(d[He]=u),i(`config`,l.measurementId,d),X&&(i(`set`,X),dt(void 0)),l.measurementId}var mt=class{constructor(e){this.app=e}_delete(){return delete Q[this.app.options.appId],Promise.resolve()}},Q={},ht=[],gt={},$=`dataLayer`,_t=`gtag`,vt,yt,bt=!1;function xt(){let e=[];if(c()&&e.push(`This is a browser extension environment.`),m()||e.push(`Cookies are not available.`),e.length>0){let t=e.map((e,t)=>`(${t+1}) ${e}`).join(` `),n=K.create(`invalid-analytics-context`,{errorInfo:t});G.warn(n.message)}}function St(e,t,n){xt();let r=e.options.appId;if(!r)throw K.create(`no-app-id`);if(!e.options.apiKey)if(e.options.measurementId)G.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw K.create(`no-api-key`);if(Q[r]!=null)throw K.create(`already-exists`,{id:r});if(!bt){Ye($);let{wrappedGtag:e,gtagCore:t}=$e(Q,ht,gt,$,_t);yt=e,vt=t,bt=!0}return Q[r]=pt(e,ht,gt,t,vt,$,n),new mt(e)}function Ct(e=ee()){e=d(e);let t=p(e,U);return t.isInitialized()?t.getImmediate():wt(e)}function wt(e,t={}){let n=p(e,U);if(n.isInitialized()){let e=n.getImmediate();if(r(t,n.getOptions()))return e;throw K.create(`already-initialized`)}return n.initialize({options:t})}async function Tt(){if(c()||!m()||!a())return!1;try{return await i()}catch{return!1}}function Et(e,t,n,r){e=d(e),lt(yt,Q[e.app.options.appId],t,n,r).catch(e=>G.error(e))}var Dt=`@firebase/analytics`,Ot=`0.10.17`;function kt(){l(new f(U,(e,{options:t})=>St(e.getProvider(`app`).getImmediate(),e.getProvider(`installations-internal`).getImmediate(),t),`PUBLIC`)),l(new f(`analytics-internal`,e,`PRIVATE`)),o(Dt,Ot),o(Dt,Ot,`esm2017`);function e(e){try{let t=e.getProvider(U).getImmediate();return{logEvent:(e,n,r)=>Et(t,e,n,r)}}catch(e){throw K.create(`interop-component-reg-failed`,{reason:e})}}}kt();export{Ct as getAnalytics,Tt as isSupported};